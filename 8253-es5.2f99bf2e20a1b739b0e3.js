!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunksuperbot=self.webpackChunksuperbot||[]).push([[8253],{8253:function(e,o,r){"use strict";r.r(o),r.d(o,{BotSetupPageModule:function(){return S}});var i=r(1116),s=r(1462),a=r(6611),u=r(2782),c=r(4762),h=r(8619),f=r(6907),l=r(2693),g=r(1779),m=r(8993);function p(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"div",4),h.TgZ(1,"ion-button",5),h.NdJ("click",function(t){return h.CHM(n),h.oxw().onDeleteBot(t)}),h._uU(2,"Delete"),h.qZA(),h.qZA()}}var d,v,y=[{path:"",component:(d=function(){function e(n,o,r,i,s){t(this,e),this.oLocation=n,this.oAPIService=o,this.http=r,this.router=i,this.oStorage=s,this.sExchange="<notSet>",this.sStrategy="<notSet>",this.sKey=void 0,this.bLoaded=!1,this.bNew=!0;var a=this.oLocation.getState();console.log(a),this.bNew=a.isNew,null==a||a.isNew||(this.sStrategy=a.Strategy,this.sExchange=a.Exchange,this.sKey=this.getKey(a),console.log(this.sKey),this.oP=a,this.updateValues(a)),null!=a&&a.isNew&&(this.sStrategy=a.Strategy,this.sExchange=a.Exchange,console.log("New Bot Configuration:",this.sStrategy))}return n(e,[{key:"onBack",value:function(){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.oLocation.back();case 1:case"end":return t.stop()}},t,this)}))}},{key:"getKey",value:function(t){return this.sExchange+"_"+this.sStrategy+"_"+t.A+t.B}},{key:"readParameters",value:function(t){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oStorage.get(t);case 2:this.oP=e.sent,this.updateValues(this.oP);case 4:case"end":return e.stop()}},e,this)}))}},{key:"ngOnInit",value:function(){var t=this;this.http.get("/assets/strategy-"+this.sStrategy+".json").subscribe(function(e){return(0,c.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.formData=e,this.updateValues(this.oP);case 1:case"end":return t.stop()}},t,this)}))})}},{key:"updateValues",value:function(t){if(void 0!==t&&null!=t&&null!=this.formData&&!this.bLoaded){this.bLoaded=!0,console.log(this.oP);for(var e=this.formData.controls.length,n=Object.keys(t),o=0;o<n.length;o++)for(var r=n[o],i=0;i<e;i++)this.formData.controls[i].name==r&&(this.formData.controls[i].value=t[r]);console.log(this.formData.controls)}}},{key:"onDeleteBot",value:function(t){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.oAPIService.send2ServerPDelete("bot-config/"+this.getKey(this.oP)).then(function(t){return(0,c.mG)(e,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=void 0!==this.sKey,!t.t0){t.next=4;break}return t.next=4,this.oStorage.remove(this.sKey);case 4:return t.next=6,this.router.navigateByUrl("bot-list");case 6:case"end":return t.stop()}},t,this)}))});case 2:case"end":return t.stop()}},t,this)}))}},{key:"onFormSubmit",value:function(t){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.bNew&&(t.Exchange=this.sExchange),console.log(t.Exchange,this.sExchange),this.sKey=this.getKey(t),console.log(this.sKey),this.oStorage.set(this.sKey,t),console.log(t),e.next=8,this.oAPIService.send2ServerP("bot-config",!0,t);case 8:return e.next=10,this.router.navigateByUrl("bot-list");case 10:case"end":return e.stop()}},e,this)}))}}]),e}(),d.\u0275fac=function(t){return new(t||d)(h.Y36(i.Ye),h.Y36(f.D),h.Y36(l.eN),h.Y36(u.F0),h.Y36(g.V))},d.\u0275cmp=h.Xpm({type:d,selectors:[["app-bot-setup"]],decls:9,vars:2,consts:[["slot","start"],["slot","end",4,"ngIf"],[1,"ion-padding"],[3,"jsonFormData","formSubmission"],["slot","end"],[3,"click"]],template:function(t,e){1&t&&(h.TgZ(0,"ion-header"),h.TgZ(1,"ion-toolbar"),h.TgZ(2,"ion-title"),h._uU(3,"Bot Configuration"),h.qZA(),h.TgZ(4,"ion-buttons",0),h._UZ(5,"ion-back-button"),h.qZA(),h.YNc(6,p,3,0,"div",1),h.qZA(),h.qZA(),h.TgZ(7,"ion-content",2),h.TgZ(8,"app-json-form",3),h.NdJ("formSubmission",function(t){return e.onFormSubmit(t)}),h.qZA(),h.qZA()),2&t&&(h.xp6(6),h.Q6J("ngIf",void 0!==e.sKey),h.xp6(2),h.Q6J("jsonFormData",e.formData))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.oU,a.cs,i.O5,a.W2,m.u,a.YG],styles:[""]}),d)}],b=function(){var e=n(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[u.Bz.forChild(y)],u.Bz]}),e}(),w=r(6737),S=((v=n(function e(){t(this,e)})).\u0275fac=function(t){return new(t||v)},v.\u0275mod=h.oAB({type:v}),v.\u0275inj=h.cJS({imports:[[i.ez,s.UX,a.Pc,b,l.JF,w.G]]}),v)}}])}();